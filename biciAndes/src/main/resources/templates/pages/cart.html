<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="shared/layout :: head"></head>
<body>

	<header th:replace="shared/layout :: header"></header>

	<h1 class="hp-title text-center mt-3 mb-0" th:text=${titulo}></h1>
	<div class="dropdown-divider mb-4"></div>

	<div class="container">
		<div th:if="${#lists.size(cart.items)>0}">
			<table class="table table-bordered table-hover table-striped ">
				<thead class="thead-dark ">
					<tr>
						<th></th>
						<th>Libros</th>
						<th>Cantidad</th>
						<th>Valor Unitario</th>
						<th>Valor Total</th>
					</tr>
				<thead />

				<tr th:each="libro, iter: ${cart.items}">
					<form th:action="@{/cart}" method="post" th:with="nlib=${libro}">
						<input type="hidden" th:value="*{libro.producto.id}" id="id"
							name="id">
						<td><a
							th:href="@{'cart/eliminar/' + ${cart.items[__${iter.index}__].producto.id}}"
							data-toggle="tooltip" data-placement="top"
							th:title="'Eliminar: ' +${cart.items[__${iter.index}__].producto.nombre} "><i
								class="fas fa-times-circle text-aling-center"></i></a></td>
						<td th:text="${cart.items[__${iter.index}__].producto.nombre}"
							class="hp-title" style="font-size: x-large;"></td>
						<td><input id="cantidad" name="cantidad" min="1"
							th:max="${libro.producto.cantidad}" onchange="this.form.submit()"
							class="cant form-control" type="number"
							th:value="*{libro.cantidad}"></input></td>
						<td><i class="fas fa-dollar-sign"></i> <span
							th:text="${#numbers.formatDecimal(cart.items[__${iter.index}__].producto.precio, 0, 'COMMA', 2, 'POINT')}">10.00</span>
						</td>
						<td><i class="fas fa-dollar-sign"></i> <span
							th:text="${#numbers.formatDecimal(cart.items[__${iter.index}__].calcularImporte(), 0, 'COMMA', 2, 'POINT')}">10.00</span>
						</td>
					</form>
				</tr>
			</table>

			<h5 class="text-right mr-4">
				<span>Total</span> <span class="badge badge-secondary"><i
					class="fas fa-hand-holding-usd"></i><span
					th:text="' '+${#numbers.formatDecimal(cart.getTotal(), 0, 'COMMA', 2, 'POINT')}"
					id="gran_total">0</span></span>
			</h5>

			<div class="row my-5">
				<button onClick="alertEliminar()" type="button"
					class="btn btn-outline-danger col-md-2 offset-md-7">
					<i class="fas fa-trash-alt"> </i> Eliminar Carrito
				</button>
				<button onClick="alertComprar()" type="button"
					class="btn btn-primary ml-auto mx-4">
					<i class="fas fa-shopping-bag"> </i> Finalizar compra
				</button>
			</div>
		</div>
		<div class="container" th:if="${#lists.size(cart.items)<1}">
			<div class="container">
				<div class="jumbotron">
					<i class="fas fa-shopping-cart fa-5x col-md-3 offset-md-5"></i>
					<h1 class="display-4 text-center">Tu carrito está vacío</h1>
					<p class="lead text-center">
						Te invitamos a disfrutar la magia de <span class="hp-title">Harry
							Potter</span> agregando libros a tu carrito.
					</p>
					<hr class="my-4">
					<a class="btn btn-secondary btn-lg col-md-3 offset-md-7"
						th:href="@{/}" role="button">Sigue Comprando</a>
				</div>
			</div>
		</div>
		<!-- <div th:if="${!#lists.isEmpty(cart.items)}" ></div> -->
		<div th:if="${#lists.size(cart.items)==1}"
			style="margin-bottom: 45px; color: white">.</div>
	</div>
	<footer th:replace="shared/layout :: footer"></footer>
	<a th:href="@{/cart/compra}" id="doCompra"></a>
	<a th:href="@{cart/eliminar/-1}" id="delCompra"></a>
	<div th:replace="pages/js/alertas :: alertsJS"></div>
</body>

</html>